<!DOCTYPE html>
<script type="module">
  import '../paper-tooltip.js';
</script>

<div>
  <template shadowroot=open>
    <style>
      .dialog {
        display: block;
        position: absolute;
        left: 0px;
        right: 0px;
        width: 100px;
        margin: auto;
      }
    </style>
    <div class=dialog>
      <slot></slot>
    </div>
  </template>
  <div>
    <div style="height: 100px; width: 100px; background-color: red"></div>
    <paper-tooltip>tooltip text</paper-tooltip>
  </div>
</div>

<script>
  function convertTemplate(template) {
    const mode = template.getAttribute('shadowroot');
    const shadowRoot = template.parentNode.attachShadow({ mode });
    shadowRoot.appendChild(template.content);
    template.remove();

    shadowRoot.querySelectorAll('template[shadowroot]').forEach(template => convertTemplate(template));
  }
  document.querySelectorAll('template[shadowroot]').forEach(template => convertTemplate(template));
</script>
